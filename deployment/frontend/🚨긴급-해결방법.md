# 🚨 onrender.com 오류 긴급 해결 가이드

## 문제 상황
`POST https://vetnam-management.onrender.com/api/agencies 401 (Unauthorized)` 오류가 계속 발생

## 🔥 즉시 해결 방법 (3가지 중 선택)

### 방법 1: 자동 스크립트 실행 (가장 확실함) ⭐⭐⭐
```bash
# 1. 실행 중인 npm start 종료 (Ctrl+C)

# 2. 파일 위치로 이동
cd C:\Users\dudu\Documents\GitHub\vetnam-management\deployment\frontend

# 3. 자동 수정 스크립트 실행
ULTRATHINK-COMPLETE-FIX.bat

# 4. 스크립트 완료 후 다시 시작
npm start
```

### 방법 2: 브라우저에서 긴급 수정 (빠른 해결) ⭐⭐
1. **npm start 종료** (Ctrl+C)
2. **emergency-fix.html 파일 더블클릭으로 열기**
   - 위치: `C:\Users\dudu\Documents\GitHub\vetnam-management\deployment\frontend\emergency-fix.html`
3. **"🔧 긴급 수정 실행"** 버튼 클릭
4. **브라우저 완전 종료**
5. **npm start** 다시 실행
6. **시크릿 모드**로 접속

### 방법 3: 수동 해결 (단계별)
```bash
# 1. 프로세스 종료
taskkill /F /IM node.exe

# 2. 캐시 삭제
cd C:\Users\dudu\Documents\GitHub\vetnam-management\deployment\frontend
rmdir /s /q build
rmdir /s /q node_modules\.cache
rmdir /s /q .cache

# 3. 환경변수 재설정
echo REACT_APP_API_URL=https://vietnam-student-backend-production.up.railway.app/api > .env
echo PORT=3001 >> .env

# 4. 재설치 및 빌드
npm install --legacy-peer-deps
npm run build

# 5. 개발 서버 시작
npm start
```

## 🧪 확인 방법

### 브라우저에서 확인
1. **시크릿 모드 열기** (Ctrl+Shift+N)
2. **http://localhost:3001** 접속
3. **F12** 개발자 도구 열기
4. **Console** 탭에서 확인:
   ```
   🚀 API_BASE_URL: https://vietnam-student-backend-production.up.railway.app/api
   ✅ Using: Railway backend
   ```
5. **Network** 탭에서 API 요청 확인
   - ✅ 올바름: `railway.app`로 요청
   - ❌ 잘못됨: `onrender.com`으로 요청

## 🎯 근본 원인

### 1. 개발 서버 캐시
- React 개발 서버가 이전 환경변수를 캐시하고 있음
- **해결**: 개발 서버 완전 재시작

### 2. 브라우저 캐시
- Service Worker나 localStorage에 이전 설정이 남아있음
- **해결**: 시크릿 모드 사용 또는 캐시 삭제

### 3. 빌드 캐시
- node_modules/.cache에 이전 빌드 정보가 남아있음
- **해결**: 캐시 폴더 삭제

## ⚠️ 주의사항

1. **반드시 npm start를 종료한 후** 수정 작업 진행
2. **시크릿 모드**로 테스트 (일반 모드는 캐시 문제 가능)
3. **F12 → Network → Disable cache** 체크
4. 수정 후에도 문제가 있으면 **Windows 재시작** 권장

## 📞 추가 지원

여전히 문제가 있다면:
1. 모든 브라우저 창 닫기
2. `node_modules` 폴더 완전 삭제
3. `npm install --legacy-peer-deps` 재실행
4. Windows 재시작
5. 처음부터 다시 시작

---

**작성일**: 2025-09-01  
**우선순위**: 🔴 긴급  
**예상 소요시간**: 5-10분